@page
@model TabsModel
@{
    ViewData["Title"] = "Tabs TagHelper";
}

<div class="docs-container">

    <nav class="docs-breadcrumb">
        <a asp-page="/Docs/Index">TagHelper Reference</a> &rsaquo; Tabs
    </nav>

    <div class="docs-header">
        <h1>Tabs TagHelper</h1>
        <p class="docs-subtitle">Renders a pure CSS tab container. No JavaScript required.</p>
        <div class="docs-meta">
            <div><span class="docs-meta-label">Elements:</span> <code>&lt;tab&gt;</code>, <code>&lt;tab-item&gt;</code></div>
            <div><span class="docs-meta-label">Classes:</span> <code>TabTagHelper</code>, <code>TabItemTagHelper</code></div>
            <div><span class="docs-meta-label">Namespace:</span> <code>CK.Taghelpers.TagHelpers.Tabs</code></div>
        </div>
        <div class="docs-meta mt-2">
            <div><span class="docs-meta-label">CSS:</span> <code>_content/CK.Taghelpers/css/tabs.css</code></div>
            <div><span class="docs-meta-label">JS:</span> None required</div>
        </div>
    </div>

    <!-- 2. Overview -->
    <div class="docs-section">
        <h2>Overview</h2>
        <p>
            The Tabs TagHelper pair renders a fully functional tab interface using only CSS — no JavaScript
            is needed. Each tab is backed by a hidden radio <code>&lt;input&gt;</code>; CSS sibling selectors
            show the panel whose radio is checked. This approach is keyboard-navigable and works without
            JavaScript enabled.
        </p>
        <p>
            Use <code>&lt;tab&gt;</code> as the outer container and add one or more <code>&lt;tab-item&gt;</code>
            children, each with a required <code>heading</code> attribute. If no item specifies
            <code>selected="true"</code>, the first tab is automatically selected on render. Tab IDs are
            generated from the heading text but can be overridden explicitly.
        </p>
    </div>

    <!-- 3. Getting Started -->
    <div class="docs-section">
        <h2>Getting Started</h2>
        <p>Include the CSS, then add a <code>&lt;tab&gt;</code> with at least one <code>&lt;tab-item&gt;</code>:</p>
<pre><code class="language-cshtml">&lt;!-- In _Layout.cshtml or this page --&gt;
&lt;link rel="stylesheet" href="~/_content/CK.Taghelpers/css/tabs.css" /&gt;

&lt;tab&gt;
    &lt;tab-item heading="First Tab"&gt;
        &lt;p&gt;Content for the first tab.&lt;/p&gt;
    &lt;/tab-item&gt;
    &lt;tab-item heading="Second Tab"&gt;
        &lt;p&gt;Content for the second tab.&lt;/p&gt;
    &lt;/tab-item&gt;
&lt;/tab&gt;</code></pre>
        <p>The <code>@@addTagHelper *, CK.Taghelpers</code> directive must appear in <code>_ViewImports.cshtml</code> (or the current page) for the tag helpers to activate.</p>
    </div>

    <!-- 4. Attribute Reference -->
    <div class="docs-section">
        <h2>Attribute Reference</h2>

        <h3><code>&lt;tab&gt;</code> — TabTagHelper</h3>
        <p>
            The <code>&lt;tab&gt;</code> element accepts no custom attributes. It renders as a
            <code>&lt;div class="tabs"&gt;</code>. Any <code>class</code> attribute you add is merged:
            if your value already includes <code>tabs</code> it is not duplicated; otherwise <code>tabs</code>
            is prepended.
        </p>

        <h3><code>&lt;tab-item&gt;</code> — TabItemTagHelper</h3>
        <table class="docs-table">
            <thead>
                <tr>
                    <th>Attribute</th>
                    <th>Type</th>
                    <th>Default</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>
                        <code>heading</code>
                        <span class="badge-required">Required</span>
                    </td>
                    <td><code>string</code></td>
                    <td>—</td>
                    <td>
                        The text displayed in the tab's clickable label. Also used to auto-generate the tab's
                        <code>id</code> when no <code>id</code> attribute is provided (lowercase, spaces
                        replaced by hyphens, non-alphanumeric characters removed). If <code>heading</code>
                        is missing or empty, the item renders an HTML comment and is excluded from the tab set.
                    </td>
                </tr>
                <tr>
                    <td><code>selected</code></td>
                    <td><code>bool</code></td>
                    <td><code>false</code></td>
                    <td>
                        When <code>true</code>, this tab is shown on initial render. If multiple items set
                        <code>selected="true"</code>, the first one wins. If no item sets it, the first tab
                        in the list is selected automatically.
                    </td>
                </tr>
                <tr>
                    <td><code>id</code></td>
                    <td><code>string?</code></td>
                    <td>—</td>
                    <td>
                        Explicit identifier for the tab. If provided, it is used as-is (after de-duplication).
                        If omitted, an ID is generated from the <code>heading</code> text. If the heading
                        yields an empty string after sanitisation, a unique fallback ID is generated.
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- 5. Configuration -->
    <div class="docs-section">
        <h2>Configuration and Usage Guidance</h2>

        <h3>Selecting a tab by default</h3>
        <p>Set <code>selected="true"</code> on the tab-item you want shown on first render:</p>
<pre><code class="language-cshtml">&lt;tab&gt;
    &lt;tab-item heading="Overview"&gt;...&lt;/tab-item&gt;
    &lt;tab-item heading="Details" selected="true"&gt;...&lt;/tab-item&gt;
    &lt;tab-item heading="History"&gt;...&lt;/tab-item&gt;
&lt;/tab&gt;</code></pre>

        <h3>Server-side dynamic selection</h3>
        <p>Bind <code>selected</code> to a server-side condition to choose the active tab based on model state:</p>
<pre><code class="language-cshtml">&lt;tab&gt;
    &lt;tab-item heading="Edit" selected="@@(Model.IsEditing)"&gt;
        @@* Edit form *@@
    &lt;/tab-item&gt;
    &lt;tab-item heading="Preview" selected="@@(!Model.IsEditing)"&gt;
        @@* Preview content *@@
    &lt;/tab-item&gt;
&lt;/tab&gt;</code></pre>

        <h3>Explicit tab IDs</h3>
        <p>
            Provide explicit IDs when you need to reference tabs from external links or JavaScript
            (for example, to open a tab programmatically via CSS class manipulation):
        </p>
<pre><code class="language-cshtml">&lt;tab&gt;
    &lt;tab-item id="tab-overview" heading="Overview"&gt;...&lt;/tab-item&gt;
    &lt;tab-item id="tab-details" heading="Details"&gt;...&lt;/tab-item&gt;
&lt;/tab&gt;</code></pre>
        <p>
            The generated radio input will have <code>id="tab-overview"</code>, and the panel will have
            <code>id="tab-overview-panel"</code>.
        </p>

        <h3>Duplicate headings</h3>
        <p>
            If two tab items would produce the same auto-generated ID (e.g. two tabs both headed
            <em>Overview</em>), the TagHelper appends a numeric suffix (<code>-1</code>, <code>-2</code>,
            etc.) to ensure uniqueness:
        </p>
<pre><code class="language-cshtml">&lt;tab&gt;
    &lt;tab-item heading="Overview"&gt;...&lt;/tab-item&gt;  @* id="overview" *@
    &lt;tab-item heading="Overview"&gt;...&lt;/tab-item&gt;  @* id="overview-1" *@
&lt;/tab&gt;</code></pre>

        <h3>Adding extra CSS classes</h3>
        <p>Additional CSS classes can be applied to the tab container:</p>
<pre><code class="language-cshtml">&lt;tab class="my-custom-tabs"&gt;
    ...
&lt;/tab&gt;</code></pre>
        <p>Renders as <code>&lt;div class="tabs my-custom-tabs"&gt;</code>.</p>

        <h3>Accessibility</h3>
        <p>The following ARIA and semantic attributes are generated automatically:</p>
        <ul>
            <li>Each hidden radio input has <code>role="tab"</code> and <code>aria-controls="{id}-panel"</code>.</li>
            <li>Each panel has <code>role="tabpanel"</code> and <code>aria-labelledby="{id}"</code>.</li>
            <li>All inputs share a unique <code>name</code> (per tab container) so the radio group is correctly scoped.</li>
            <li>
                Keyboard navigation: focus moves to the tab labels (the <code>&lt;label&gt;</code> elements
                linked to the radio inputs). Arrow keys cycle through the radio group in most browsers when
                any radio is focused.
            </li>
        </ul>

        <h3>Multiple tab containers on a page</h3>
        <p>
            Each <code>&lt;tab&gt;</code> generates a unique radio group name (<code>tabs-{uniqueId}</code>)
            so multiple tab containers on the same page do not interfere with each other.
        </p>

        <h3>Tabs inside loops</h3>
<pre><code class="language-cshtml">@@foreach (var section in Model.Sections)
{
    &lt;h2&gt;@@section.Name&lt;/h2&gt;
    &lt;tab&gt;
        @@foreach (var tab in section.Tabs)
        {
            &lt;tab-item heading="@@tab.Title"&gt;
                &lt;p&gt;@@tab.Content&lt;/p&gt;
            &lt;/tab-item&gt;
        }
    &lt;/tab&gt;
}</code></pre>
    </div>

    <!-- 7. Notes -->
    <div class="docs-section">
        <h2>Notes and Known Limitations</h2>
        <ul>
            <li>
                <strong>No JavaScript.</strong> The tab state is maintained entirely by CSS radio-input
                state. There is no JS API and no custom events fired on tab change.
            </li>
            <li>
                <strong>Panel height is fixed at 450px.</strong> The <code>.panel</code> class in
                <code>tabs.css</code> sets <code>height: 450px</code>. Override this with a custom CSS
                class on the <code>&lt;tab&gt;</code> element if your content requires a different height.
            </li>
            <li>
                <strong>Missing heading.</strong> A <code>&lt;tab-item&gt;</code> without a
                <code>heading</code> attribute renders an HTML comment (<code>&lt;!-- TabItemTagHelper:
                Missing required 'heading' attribute --&gt;</code>) and is excluded from the tab set.
            </li>
            <li>
                <strong>Responsive layout.</strong> Below 600 px, tab headings stack vertically (accordion-
                style). Above 600 px, they render horizontally across the top with the panel below.
            </li>
        </ul>
    </div>

</div>

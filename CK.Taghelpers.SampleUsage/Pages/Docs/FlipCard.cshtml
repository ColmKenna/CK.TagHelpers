@page
@model FlipCardModel
@{
    ViewData["Title"] = "FlipCard TagHelper";
}

<div class="docs-container">

    <nav class="docs-breadcrumb">
        <a asp-page="/Docs/Index">TagHelper Reference</a> &rsaquo; FlipCard
    </nav>

    <div class="docs-header">
        <h1>FlipCard TagHelper</h1>
        <p class="docs-subtitle">Renders a 3D flip card with distinct front and back faces, toggled by a button click.</p>
        <div class="docs-meta">
            <div><span class="docs-meta-label">Elements:</span> <code>&lt;flip-card&gt;</code>, <code>&lt;card-front&gt;</code>, <code>&lt;card-back&gt;</code></div>
            <div><span class="docs-meta-label">Classes:</span> <code>FlipCardTagHelper</code>, <code>FlipCardFaceTagHelper</code></div>
            <div><span class="docs-meta-label">Namespace:</span> <code>CK.Taghelpers.TagHelpers.FlipCard</code></div>
        </div>
        <div class="docs-meta mt-2">
            <div><span class="docs-meta-label">CSS:</span> <code>_content/CK.Taghelpers/css/flip-card.css</code></div>
            <div><span class="docs-meta-label">JS:</span> <code>_content/CK.Taghelpers/js/flip-card.js</code></div>
        </div>
    </div>

    <!-- 2. Overview -->
    <div class="docs-section">
        <h2>Overview</h2>
        <p>
            The FlipCard TagHelper renders a CSS 3D flip card with two faces: a front and an optional back.
            Place <code>&lt;card-front&gt;</code> and <code>&lt;card-back&gt;</code> child elements inside
            <code>&lt;flip-card&gt;</code> to define each face's header title and body content. The card rotates
            on button click using a CSS 3D transform; the companion JavaScript module manages ARIA state
            (<code>aria-hidden</code>, <code>aria-pressed</code>) and optional auto-height equalization so both faces
            occupy the same space.
        </p>
        <p>
            Use this component when two related views share the same screen real estate — for example, a question
            and its answer, a product overview and detailed specifications, or a summary card with a detail panel.
            If no <code>&lt;card-back&gt;</code> is provided the flip buttons are suppressed and the card acts as a
            plain framed panel.
        </p>
    </div>

    <!-- 3. Getting Started -->
    <div class="docs-section">
        <h2>Getting Started</h2>
        <p>Include the CSS and JS assets, then add <code>&lt;flip-card&gt;</code> with at least a front face:</p>
<pre><code class="language-cshtml">&lt;!-- In _Layout.cshtml or this page --&gt;
&lt;link rel="stylesheet" href="~/_content/CK.Taghelpers/css/flip-card.css" /&gt;
&lt;script src="~/_content/CK.Taghelpers/js/flip-card.js"&gt;&lt;/script&gt;

&lt;flip-card&gt;
    &lt;card-front title="Hello"&gt;
        &lt;p&gt;This is the front content.&lt;/p&gt;
    &lt;/card-front&gt;
    &lt;card-back title="World"&gt;
        &lt;p&gt;This is the back content.&lt;/p&gt;
    &lt;/card-back&gt;
&lt;/flip-card&gt;</code></pre>
        <p>The <code>@@addTagHelper *, CK.Taghelpers</code> directive must appear in <code>_ViewImports.cshtml</code> (or the current page) for the tag helpers to activate.</p>
    </div>

    <!-- 4. Attribute Reference -->
    <div class="docs-section">
        <h2>Attribute Reference</h2>

        <h3><code>&lt;flip-card&gt;</code> — FlipCardTagHelper</h3>
        <table class="docs-table">
            <thead>
                <tr>
                    <th>Attribute</th>
                    <th>Type</th>
                    <th>Default</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>flip-direction</code></td>
                    <td><code>FlipDirection</code></td>
                    <td><code>Horizontal</code></td>
                    <td>The axis on which the card rotates. See enum values below.</td>
                </tr>
                <tr>
                    <td><code>auto-height</code></td>
                    <td><code>bool?</code></td>
                    <td>—</td>
                    <td>
                        When <code>true</code>, JavaScript equalizes the height of both faces so the card always
                        shows the taller face's height. Requires <code>flip-card.js</code> to be loaded.
                        Equalization runs on DOMContentLoaded and on window resize (debounced 100 ms).
                    </td>
                </tr>
                <tr>
                    <td><code>button-text</code></td>
                    <td><code>string</code></td>
                    <td><code>"Flip"</code></td>
                    <td>Default label for both flip buttons. Overridden individually by <code>front-button-text</code> and <code>back-button-text</code>.</td>
                </tr>
                <tr>
                    <td><code>front-button-text</code></td>
                    <td><code>string?</code></td>
                    <td>—</td>
                    <td>Text for the flip button on the front face. Falls back to <code>button-text</code> when not set.</td>
                </tr>
                <tr>
                    <td><code>back-button-text</code></td>
                    <td><code>string?</code></td>
                    <td>—</td>
                    <td>Text for the flip button on the back face. Falls back to <code>button-text</code> when not set.</td>
                </tr>
                <tr>
                    <td><code>button-class</code></td>
                    <td><code>string?</code></td>
                    <td>—</td>
                    <td>Additional CSS class(es) appended to the built-in <code>rotate-button</code> class on each flip button.</td>
                </tr>
                <tr>
                    <td><code>show-buttons</code></td>
                    <td><code>bool</code></td>
                    <td><code>true</code></td>
                    <td>Whether to render flip buttons. Set to <code>false</code> to display the card without buttons (e.g. flip programmatically).</td>
                </tr>
                <tr>
                    <td><code>class</code></td>
                    <td><code>string?</code></td>
                    <td>—</td>
                    <td>Additional CSS class(es) applied to the outer <code>card-container flip-card</code> wrapper element.</td>
                </tr>
            </tbody>
        </table>

        <h4>FlipDirection enum values</h4>
        <table class="docs-table">
            <thead><tr><th>Value</th><th>Description</th></tr></thead>
            <tbody>
                <tr><td><code>Horizontal</code></td><td>Card rotates around the Y axis (left-right flip).</td></tr>
                <tr><td><code>Vertical</code></td><td>Card rotates around the X axis (top-bottom flip).</td></tr>
            </tbody>
        </table>

        <h3><code>&lt;card-front&gt;</code> / <code>&lt;card-back&gt;</code> — FlipCardFaceTagHelper</h3>
        <p>Both child elements share the same TagHelper class and the same attribute.</p>
        <table class="docs-table">
            <thead>
                <tr>
                    <th>Attribute</th>
                    <th>Type</th>
                    <th>Default</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>title</code></td>
                    <td><code>string</code></td>
                    <td><code>"Front"</code> / <code>"Back"</code></td>
                    <td>Text displayed in the card face's header <code>&lt;h2&gt;</code>. Defaults to <code>"Front"</code> for <code>&lt;card-front&gt;</code> and <code>"Back"</code> for <code>&lt;card-back&gt;</code> when not supplied or empty.</td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- 5. Configuration -->
    <div class="docs-section">
        <h2>Configuration and Usage Guidance</h2>

        <h3>Vertical flip direction</h3>
        <p>Use <code>flip-direction="Vertical"</code> to rotate the card around the horizontal axis instead:</p>
<pre><code class="language-cshtml">&lt;flip-card flip-direction="Vertical"&gt;
    &lt;card-front title="Question"&gt;...&lt;/card-front&gt;
    &lt;card-back title="Answer"&gt;...&lt;/card-back&gt;
&lt;/flip-card&gt;</code></pre>

        <h3>Custom button text</h3>
        <p>Use different labels for the front and back buttons:</p>
<pre><code class="language-cshtml">&lt;flip-card front-button-text="See Details" back-button-text="Go Back"&gt;
    &lt;card-front title="Overview"&gt;...&lt;/card-front&gt;
    &lt;card-back title="Details"&gt;...&lt;/card-back&gt;
&lt;/flip-card&gt;</code></pre>

        <h3>Auto-height equalization</h3>
        <p>
            When front and back faces have different content heights, set <code>auto-height="true"</code>.
            The JavaScript module measures both faces after load and sets the card's height to the larger value:
        </p>
<pre><code class="language-cshtml">&lt;flip-card auto-height="true"&gt;
    &lt;card-front title="Short"&gt;&lt;p&gt;Brief content.&lt;/p&gt;&lt;/card-front&gt;
    &lt;card-back title="Long"&gt;
        &lt;p&gt;Much more content here that would otherwise overflow...&lt;/p&gt;
    &lt;/card-back&gt;
&lt;/flip-card&gt;</code></pre>

        <h3>Front-only card (no flip)</h3>
        <p>
            Omit <code>&lt;card-back&gt;</code> entirely to render a simple framed panel. The TagHelper
            suppresses the flip buttons automatically when there is no back content:
        </p>
<pre><code class="language-cshtml">&lt;flip-card&gt;
    &lt;card-front title="Notice"&gt;
        &lt;p&gt;This card has no back face.&lt;/p&gt;
    &lt;/card-front&gt;
&lt;/flip-card&gt;</code></pre>

        <h3>Hiding buttons while keeping flip capability</h3>
        <p>Set <code>show-buttons="false"</code> to render the card without buttons. You can then trigger the flip programmatically via JavaScript:</p>
<pre><code class="language-cshtml">&lt;flip-card show-buttons="false" class="my-card"&gt;
    &lt;card-front title="Front"&gt;...&lt;/card-front&gt;
    &lt;card-back title="Back"&gt;...&lt;/card-back&gt;
&lt;/flip-card&gt;

&lt;script&gt;
    // Flip the card by toggling the is-flipped class
    document.querySelector('.my-card .card').classList.toggle('is-flipped');
&lt;/script&gt;</code></pre>

        <h3>Appearance and theming</h3>
        <p>All visual aspects of the card are controlled via CSS custom properties. Apply them to a wrapper element or directly to the component:</p>
<pre><code class="language-css">.my-themed-card {
    --flip-card-width: 400px;
    --flip-card-height: 250px;
    --bg: #1e293b;
    --color: #f1f5f9;
    --border-color: #334155;
    --header-bg: #0f172a;
    --button-bg: #334155;
    --button-color: #f1f5f9;
    --flip-card-transition-duration: 0.4s;
}</code></pre>

        <h3>Accessibility</h3>
        <p>The TagHelper generates the following ARIA attributes automatically:</p>
        <ul>
            <li>The front face has <code>aria-hidden="false"</code> initially; the back face has <code>aria-hidden="true"</code>.</li>
            <li>On flip, these values are toggled by the JavaScript module so screen readers present only the visible face.</li>
            <li>Each flip button has <code>aria-pressed="false"</code> initially; this is updated to <code>"true"</code> when the card is flipped.</li>
            <li>The <code>@@media (prefers-reduced-motion: reduce)</code> rule in <code>flip-card.css</code> disables the CSS transition for users who prefer reduced motion.</li>
        </ul>
    </div>

    <!-- 6. JavaScript API -->
    <div class="docs-section">
        <h2>JavaScript API</h2>
        <p>The <code>flip-card.js</code> module is an IIFE that exposes a global <code>window.FlipCard</code> namespace. It initialises automatically on <code>DOMContentLoaded</code>.</p>

        <h3>Methods</h3>
        <table class="docs-table">
            <thead>
                <tr><th>Method</th><th>Parameters</th><th>Returns</th><th>Description</th></tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>FlipCard.initialize()</code></td>
                    <td>—</td>
                    <td><code>void</code></td>
                    <td>Wires flip-button click handlers and runs height equalization. Call this after dynamically inserting a flip card into the DOM.</td>
                </tr>
                <tr>
                    <td><code>FlipCard.equalizeHeights()</code></td>
                    <td>—</td>
                    <td><code>void</code></td>
                    <td>Recalculates and equalizes the heights of all <code>.auto-height</code> cards on the page. Called automatically on window resize (100 ms debounce).</td>
                </tr>
            </tbody>
        </table>

        <p>Example — reinitialise after injecting a card via AJAX:</p>
<pre><code class="language-javascript">// After inserting new flip-card markup into the DOM:
FlipCard.initialize();</code></pre>

        <h3>CSS Custom Properties</h3>
        <table class="docs-table">
            <thead>
                <tr><th>Property</th><th>Default</th><th>Description</th></tr>
            </thead>
            <tbody>
                <tr><td><code>--flip-card-width</code></td><td><code>300px</code></td><td>Width of the card.</td></tr>
                <tr><td><code>--flip-card-height</code></td><td><code>300px</code></td><td>Height of the card. Used as the minimum height in auto-height mode.</td></tr>
                <tr><td><code>--flip-card-transition-duration</code></td><td><code>0.6s</code></td><td>Duration of the flip animation.</td></tr>
                <tr><td><code>--flip-card-header-height</code></td><td><code>40px</code></td><td>Minimum height of each face's header row.</td></tr>
                <tr><td><code>--border-width</code></td><td><code>1px</code></td><td>Border width for the card faces and buttons.</td></tr>
                <tr><td><code>--border-color</code></td><td><code>#ccc</code></td><td>Border colour for the card faces and buttons.</td></tr>
                <tr><td><code>--border-radius</code></td><td><code>10px</code></td><td>Corner radius for the card faces.</td></tr>
                <tr><td><code>--shadow</code></td><td><code>0 4px 8px rgba(0,0,0,0.1)</code></td><td>Box shadow applied to each face.</td></tr>
                <tr><td><code>--bg</code></td><td><code>#fff</code></td><td>Background colour of the card faces.</td></tr>
                <tr><td><code>--color</code></td><td><code>inherit</code></td><td>Text colour of the card faces.</td></tr>
                <tr><td><code>--header-bg</code></td><td><code>transparent</code></td><td>Background colour of the header strip on each face.</td></tr>
                <tr><td><code>--padding</code></td><td><code>10px</code></td><td>Padding inside headers and content areas.</td></tr>
                <tr><td><code>--font-size</code></td><td><code>1rem</code></td><td>Font size of the header <code>&lt;h2&gt;</code> text.</td></tr>
                <tr><td><code>--font-weight</code></td><td><code>600</code></td><td>Font weight of the header text.</td></tr>
                <tr><td><code>--button-bg</code></td><td><code>#fff</code></td><td>Background colour of the flip buttons.</td></tr>
                <tr><td><code>--button-color</code></td><td><code>inherit</code></td><td>Text colour of the flip buttons.</td></tr>
                <tr><td><code>--button-bg-hover</code></td><td><code>#f0f0f0</code></td><td>Background colour of the flip buttons on hover.</td></tr>
                <tr><td><code>--focus-color</code></td><td><code>#0066cc</code></td><td>Colour of the focus outline on the flip buttons.</td></tr>
            </tbody>
        </table>
    </div>

    <!-- 7. Notes -->
    <div class="docs-section">
        <h2>Notes and Known Limitations</h2>
        <ul>
            <li>
                <strong>No back face = no buttons.</strong> The TagHelper checks at render time whether
                <code>&lt;card-back&gt;</code> content exists. If none is provided, flip buttons are not
                rendered on either face, regardless of the <code>show-buttons</code> attribute.
            </li>
            <li>
                <strong>Auto-height requires JavaScript.</strong> The <code>auto-height</code> attribute
                adds the <code>auto-height</code> CSS class but height equalization only happens when
                <code>flip-card.js</code> runs. Without the script the card uses <code>--flip-card-height</code>
                as a fixed height.
            </li>
            <li>
                <strong>Reduced motion.</strong> The <code>@@media (prefers-reduced-motion: reduce)</code>
                rule sets <code>transition: none</code> on the card, disabling the flip animation for users
                who have enabled this OS-level preference. The flip still occurs visually but is instantaneous.
            </li>
            <li>
                <strong>CSS assets are not in the default layout.</strong> The sample project's
                <code>_Layout.cshtml</code> does not include <code>flip-card.css</code> or <code>flip-card.js</code>
                by default. Add them to the layout or include them per-page in a <code>@@section Scripts</code> block.
            </li>
            <li>
                <strong><code>ButtonCssClass</code> is HTML-encoded.</strong> The <code>button-class</code>
                attribute value is passed through <code>HtmlEncoder.Default.Encode()</code> before being
                placed in the class attribute, preventing CSS injection.
            </li>
        </ul>
    </div>

</div>

@model TabAntiPatternsViewModel

@{
    ViewData["Title"] = "Tab - Anti-Patterns";
}

<link rel="stylesheet" href="~/_content/CK.Taghelpers/css/tabs.css" asp-append-version="true" />

<div class="example-page">
    <h1>@ViewData["Title"]</h1>
    <p class="page-description">
        Common mistakes when using the Tab TagHelper and their correct alternatives.
    </p>

    <nav class="example-nav">
        <a asp-controller="TabExamples" asp-action="Index">&larr; Back to Tab examples</a>
    </nav>

    <!-- ANTI-PATTERN 1 -->
    <section class="example-section" id="missing-heading">
        <h2>Missing heading attribute</h2>
        <p class="example-description">
            The <code>heading</code> attribute is required on <code>&lt;tab-item&gt;</code>. When omitted
            or blank, the TagHelper renders an HTML comment instead of a functional tab.
        </p>

        <div class="example-container row g-3">
            <div class="example-rendered col-lg-6">
                <h3 class="h6">Incorrect</h3>
                <div class="border border-danger rounded p-3 mb-3">
                    <tab>
                        <tab-item>
                            <p>This tab-item has no heading attribute.</p>
                        </tab-item>
                        <tab-item heading="Valid Tab">
                            <p>This tab works correctly.</p>
                        </tab-item>
                    </tab>
                </div>

                <h3 class="h6">Correct</h3>
                <div class="border border-success rounded p-3">
                    <tab>
                        <tab-item heading="First Tab">
                            <p>Every tab-item has a heading.</p>
                        </tab-item>
                        <tab-item heading="Second Tab">
                            <p>Both tabs work correctly.</p>
                        </tab-item>
                    </tab>
                </div>
            </div>

            <div class="example-source col-lg-6">
                <h3 class="h6">Incorrect</h3>
                <pre><code class="language-cshtml">@Html.Raw("&lt;!-- &#10060; Missing heading attribute --&gt;\n&lt;tab&gt;\n    &lt;tab-item&gt;\n        &lt;p&gt;No heading!&lt;/p&gt;\n    &lt;/tab-item&gt;\n    &lt;tab-item heading=\"Valid Tab\"&gt;\n        &lt;p&gt;This one works.&lt;/p&gt;\n    &lt;/tab-item&gt;\n&lt;/tab&gt;")</code></pre>

                <h3 class="h6 mt-3">Correct</h3>
                <pre><code class="language-cshtml">@Html.Raw("&lt;!-- &#9989; Always provide a heading --&gt;\n&lt;tab&gt;\n    &lt;tab-item heading=\"First Tab\"&gt;\n        &lt;p&gt;Every tab-item has a heading.&lt;/p&gt;\n    &lt;/tab-item&gt;\n    &lt;tab-item heading=\"Second Tab\"&gt;\n        &lt;p&gt;Both tabs work correctly.&lt;/p&gt;\n    &lt;/tab-item&gt;\n&lt;/tab&gt;")</code></pre>
            </div>
        </div>

        <div class="example-notes">
            <strong>Note:</strong> The TagHelper outputs
            <code>&lt;!-- TabItemTagHelper: Missing required 'heading' attribute --&gt;</code> as a
            diagnostic comment when the heading is missing or whitespace-only.
        </div>
    </section>

    <!-- ANTI-PATTERN 2 -->
    <section class="example-section" id="tab-item-outside-tab">
        <h2>tab-item outside a tab container</h2>
        <p class="example-description">
            The <code>&lt;tab-item&gt;</code> TagHelper requires <code>ParentTag = "tab"</code>. When
            placed outside a <code>&lt;tab&gt;</code>, the TagHelper is not activated and the element
            renders as an unknown HTML tag.
        </p>

        <div class="example-container row g-3">
            <div class="example-rendered col-lg-6">
                <h3 class="h6">Incorrect</h3>
                <div class="border border-danger rounded p-3 mb-3">
                    <p class="text-muted"><em>A <code>&lt;tab-item&gt;</code> outside a <code>&lt;tab&gt;</code>
                    is not processed as a TagHelper. It renders as an unrecognised HTML element.</em></p>
                </div>

                <h3 class="h6">Correct</h3>
                <div class="border border-success rounded p-3">
                    <tab>
                        <tab-item heading="Properly Nested">
                            <p>Tab items must be direct children of a tab container.</p>
                        </tab-item>
                    </tab>
                </div>
            </div>

            <div class="example-source col-lg-6">
                <h3 class="h6">Incorrect</h3>
                <pre><code class="language-cshtml">@Html.Raw("&lt;!-- &#10060; tab-item outside tab container --&gt;\n&lt;div&gt;\n    &lt;tab-item heading=\"Orphaned\"&gt;\n        &lt;p&gt;Not inside a &amp;lt;tab&amp;gt;!&lt;/p&gt;\n    &lt;/tab-item&gt;\n&lt;/div&gt;")</code></pre>

                <h3 class="h6 mt-3">Correct</h3>
                <pre><code class="language-cshtml">@Html.Raw("&lt;!-- &#9989; tab-item inside tab container --&gt;\n&lt;tab&gt;\n    &lt;tab-item heading=\"Properly Nested\"&gt;\n        &lt;p&gt;Correctly placed inside a tab.&lt;/p&gt;\n    &lt;/tab-item&gt;\n&lt;/tab&gt;")</code></pre>
            </div>
        </div>
    </section>

    <!-- ANTI-PATTERN 3 -->
    <section class="example-section" id="missing-css">
        <h2>Missing tabs.css stylesheet</h2>
        <p class="example-description">
            Without the CSS file, the radio inputs are visible, panels are all displayed simultaneously,
            and the tab layout is broken. The TagHelper produces valid HTML but relies on CSS for the
            tabbed presentation.
        </p>

        <div class="example-container row g-3">
            <div class="example-rendered col-lg-6">
                <h3 class="h6">Symptom</h3>
                <div class="border border-danger rounded p-3 mb-3">
                    <p class="text-muted"><em>Radio buttons are visible. All panels are shown at once.
                    No tab-like visual presentation.</em></p>
                </div>

                <h3 class="h6">Fix</h3>
                <div class="border border-success rounded p-3">
                    <p>Include the stylesheet in your layout or page:</p>
                    <code>&lt;link rel="stylesheet" href="~/_content/CK.Taghelpers/css/tabs.css" /&gt;</code>
                </div>
            </div>

            <div class="example-source col-lg-6">
                <h3 class="h6">Incorrect</h3>
                <pre><code class="language-cshtml">@Html.Raw("&lt;!-- &#10060; No CSS reference --&gt;\n&lt;tab&gt;\n    &lt;tab-item heading=\"First\"&gt;...&lt;/tab-item&gt;\n    &lt;tab-item heading=\"Second\"&gt;...&lt;/tab-item&gt;\n&lt;/tab&gt;")</code></pre>

                <h3 class="h6 mt-3">Correct</h3>
                <pre><code class="language-cshtml">@Html.Raw("&lt;!-- &#9989; Include the CSS --&gt;\n&lt;link rel=\"stylesheet\"\n      href=\"~/_content/CK.Taghelpers/css/tabs.css\" /&gt;\n\n&lt;tab&gt;\n    &lt;tab-item heading=\"First\"&gt;...&lt;/tab-item&gt;\n    &lt;tab-item heading=\"Second\"&gt;...&lt;/tab-item&gt;\n&lt;/tab&gt;")</code></pre>
            </div>
        </div>

        <div class="example-notes">
            <strong>Note:</strong> The CSS hides radio inputs via <code>position: absolute; opacity: 0</code>
            and uses the <code>:checked</code> pseudo-class to show the correct panel. Without this CSS,
            the HTML structure is valid but not visually useful.
        </div>
    </section>
</div>

@model CK.Taghelpers.SampleUsage.Models.TeamViewModel

@{
    ViewData["Title"] = "TagHelper Examples";
}

<div class="container mt-4">
    <h1>EditArray TagHelper Examples</h1>
    <p class="lead">This page demonstrates the various features and configurations of the <code>&lt;edit-array&gt;</code> TagHelper.</p>

    <form asp-action="Index" method="post">
        <div class="mb-4">
            <label asp-for="Name" class="form-label fw-bold">Team Name</label>
            <input asp-for="Name" class="form-control" />
        </div>

        <ul class="nav nav-tabs mb-3" id="examplesTab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="full-tab" data-bs-toggle="tab" data-bs-target="#full" type="button" role="tab" aria-controls="full" aria-selected="true">Full Featured</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="basic-tab" data-bs-toggle="tab" data-bs-target="#basic" type="button" role="tab" aria-controls="basic" aria-selected="false">Basic Usage</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="styled-tab" data-bs-toggle="tab" data-bs-target="#styled" type="button" role="tab" aria-controls="styled" aria-selected="false">Custom Styling</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="empty-tab" data-bs-toggle="tab" data-bs-target="#empty" type="button" role="tab" aria-controls="empty" aria-selected="false">Empty State</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="callbacks-tab" data-bs-toggle="tab" data-bs-target="#callbacks" type="button" role="tab" aria-controls="callbacks" aria-selected="false">Callbacks</button>
            </li>
        </ul>

        <div class="tab-content" id="examplesTabContent">
            
            <!-- Example 1: Full Featured -->
            <div class="tab-pane fade show active" id="full" role="tabpanel" aria-labelledby="full-tab">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0">Full Featured Example</h5>
                    </div>
                    <div class="card-body">
                        <p class="card-text">
                            Demonstrates: 
                            <span class="badge bg-success">Display Mode</span>
                            <span class="badge bg-info">Reordering</span>
                            <span class="badge bg-primary">Add New</span>
                            <span class="badge bg-secondary">Templates</span>
                        </p>
                        <edit-array asp-for="Members"
                                    asp-items="Model.Members"
                                    id="team-members"
                                    asp-view-name="../Shared/PersonEditors/_PersonEditor.cshtml"
                                    asp-display-mode="true"
                                    asp-display-view-name="../Shared/PersonEditors/_PersonDisplay.cshtml"
                                    asp-template="true"
                                    asp-add-button="true"
                                    asp-add-text="Add New Member"
                                    asp-enable-reordering="true"
                                    asp-empty-placeholder="No members found. Add one!"
                                    asp-container-class="members-container"
                                    asp-item-class="member-item mb-3" 
                        />
                    </div>
                </div>
            </div>

            <!-- Example 2: Basic Usage -->
            <div class="tab-pane fade" id="basic" role="tabpanel" aria-labelledby="basic-tab">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0">Basic Usage</h5>
                    </div>
                    <div class="card-body">
                        <p class="card-text">
                             Demonstrates: 
                            <span class="badge bg-warning text-dark">Edit Mode Only</span>
                            <span class="badge bg-secondary">No Reordering</span>
                        </p>
                        <edit-array asp-for="BasicList"
                                    asp-items="Model.BasicList"
                                    id="basic-list"
                                    asp-view-name="../Shared/PersonEditors/_PersonEditor.cshtml"
                                    asp-template="true"
                                    asp-add-button="true"
                        />
                    </div>
                </div>
            </div>

            <!-- Example 3: Custom Styling -->
            <div class="tab-pane fade" id="styled" role="tabpanel" aria-labelledby="styled-tab">
                <div class="card border-primary">
                    <div class="card-header bg-primary text-white">
                        <h5 class="card-title mb-0">Custom Styling</h5>
                    </div>
                    <div class="card-body">
                        <p class="card-text">
                             Demonstrates: 
                            <span class="badge bg-light text-dark">Custom Classes</span>
                            <span class="badge bg-light text-dark">Custom Button Text</span>
                        </p>
                        <style>
                            .custom-container { border: 2px dashed #0d6efd; padding: 15px; border-radius: 8px; }
                            .custom-item { background-color: #f8f9fa; padding: 10px; border-radius: 5px; margin-bottom: 10px; }
                        </style>
                        <edit-array asp-for="StyledList"
                                    asp-items="Model.StyledList"
                                    id="styled-list"
                                    asp-view-name="../Shared/PersonEditors/_PersonEditor.cshtml"
                                    asp-display-mode="true"
                                    asp-display-view-name="../Shared/PersonEditors/_PersonDisplay.cshtml"
                                    asp-template="true"
                                    asp-add-button="true"
                                    asp-add-text="âž• Invite Hero"
                                    asp-edit-text="âœï¸ Modifier"
                                    asp-delete-text="ðŸ—‘ï¸ Retire"
                                    asp-done-text="âœ… Save"
                                    asp-container-class="custom-container"
                                    asp-item-class="custom-item"
                                    asp-button-class="btn btn-sm"
                        />
                    </div>
                </div>
            </div>

            <!-- Example 4: Empty State -->
            <div class="tab-pane fade" id="empty" role="tabpanel" aria-labelledby="empty-tab">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0">Empty State</h5>
                    </div>
                    <div class="card-body">
                        <p class="card-text">
                             Demonstrates: 
                            <span class="badge bg-secondary">Empty Placeholder</span>
                        </p>
                        <edit-array asp-for="EmptyList"
                                    asp-items="Model.EmptyList"
                                    id="empty-list"
                                    asp-view-name="../Shared/PersonEditors/_PersonEditor.cshtml"
                                    asp-template="true"
                                    asp-add-button="true"
                                    asp-empty-placeholder="ðŸ‘» No ghosts here! (This is the empty placeholder)"
                        />
                    </div>
                </div>
            </div>

            <!-- Example 5: Callbacks -->
            <div class="tab-pane fade" id="callbacks" role="tabpanel" aria-labelledby="callbacks-tab">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0">Callbacks</h5>
                    </div>
                    <div class="card-body">
                        <p class="card-text">
                             Demonstrates: 
                            <span class="badge bg-info">JS Callbacks</span>
                            <span class="badge bg-dark">Console Logging</span>
                        </p>
                        <div id="callback-log" class="alert alert-secondary d-none">
                            <strong>Log:</strong> <span id="log-message"></span>
                        </div>
                        <edit-array asp-for="CallbackList"
                                    asp-items="Model.CallbackList"
                                    id="callback-list"
                                    asp-view-name="../Shared/PersonEditors/_PersonEditor.cshtml"
                                    asp-display-mode="true"
                                    asp-display-view-name="../Shared/PersonEditors/_PersonDisplay.cshtml"
                                    asp-on-update="onItemUpdated"
                                    asp-on-delete="onItemDeleted"
                        />
                    </div>
                </div>
            </div>
        </div>

        <hr class="mt-4" />
        <button type="submit" class="btn btn-lg btn-success">Save All Changes</button>
    </form>
</div>

@section Scripts {
    <script src="~/_content/CK.Taghelpers/js/editArray.js"></script>
    <script>
        // Log callbacks
        function onItemUpdated(itemId) {
            logMessage(`Item updated: ${itemId}`);
            console.log('Update callback triggered for:', itemId);
        }

        function onItemDeleted(itemId) {
            logMessage(`Item deleted/undeleted: ${itemId}`);
            console.log('Delete callback triggered for:', itemId);
        }

        function logMessage(msg) {
            const logBox = document.getElementById('callback-log');
            const logMsg = document.getElementById('log-message');
            logBox.classList.remove('d-none');
            logMsg.textContent = `${new Date().toLocaleTimeString()} - ${msg}`;
            
            // Auto hide after 3 seconds
            setTimeout(() => {
                logBox.classList.add('d-none');
            }, 3000);
        }
    </script>
}
